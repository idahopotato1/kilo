<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@kiswa/kilo documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/stripe.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">@kiswa/kilo documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>HasFrame</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>lib/tile-map.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Simple interface requiring a frame property of type <a href="../interfaces/Point.html">Point</a>.</p>

            </p>


        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#frame">frame</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="frame"></a>
                                        <span class="name"><b>frame</b><a href="#frame"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>frame:         <code><a href="../interfaces/Point.html" target="_self" >Point</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="../interfaces/Point.html" target="_self" >Point</a></code>

                                        </td>
                                    </tr>





                            <tr>
                                <td class="col-md-4">
                                    <div class="io-description"><p>The frame used by a <a href="../classes/TileMap.html">TileMap</a>.  </p>
</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Container, TileSprite } from &#x27;.&#x27;
import { HitBox, Point, Texture, Vec } from &#x27;./types&#x27;
import { TiledMap } from &#x27;./utils&#x27;

/**
 * Simple interface requiring a frame property of type {@link Point}.
 */
interface HasFrame {
  /** The frame used by a {@link TileMap}.  */
  frame: Point
}

/**
 * A customized Container of {@link TileSprite} objects that provides helper
 * methods for accessing tiles.
 *
 * Only tiles on the &#x27;level&#x27; layer are used. Other layers are only for display.
 */
export class TileMap extends Container {
  /** Width of the entire map in tiles. */
  mapWidth: number
  /** Height of the entire map in tiles. */
  mapHeight: number
  /** Width of one tile in pixels. */
  tileWidth: number
  /** Height of one tile in pixels. */
  tileHeight: number
  /** Index of the level layer in tiles data. */
  levelIndex: number

  /** Gets the layers up to and including the level layer. */
  get layersUpToLevel() {
    const layers &#x3D; []

    for (let i &#x3D; 0; i &lt;&#x3D; this.levelIndex; ++i) {
      layers.push(this.children[i])
    }

    return layers
  }

  /** Gets the layers above the level layer. */
  get layersAboveLevel() {
    const layers &#x3D; []

    for (let i &#x3D; this.levelIndex; i &lt; this.children.length; ++i) {
      layers.push(this.children[i])
    }

    return layers
  }

  /**
   * Initialize TileMap object.
   *
   * @param tiles Array of arrays of objects with at least a &#x60;frame&#x60; (Point) property.
   * @param data TiledMap object.
   * @param texture Texture to use for tiles.
   */
  constructor(tiles: HasFrame[][], data: TiledMap, texture: Texture) {
    super()

    this.mapWidth &#x3D; data.mapWidth
    this.mapHeight &#x3D; data.mapHeight
    this.tileWidth &#x3D; data.tileWidth
    this.tileHeight &#x3D; data.tileHeight
    this.levelIndex &#x3D; data.levelIndex

    for (let i &#x3D; 0; i &lt; tiles.length; i++) {
      let layer &#x3D; this.add&lt;Container&gt;(new Container())

      for (let j &#x3D; 0; j &lt; tiles[i].length; j++) {
        const s &#x3D; new TileSprite(texture, data.tileWidth, data.tileHeight)

        s.frame &#x3D; tiles[i][j].frame
        s.pos.x &#x3D; j % data.mapWidth * data.tileWidth
        s.pos.y &#x3D; Math.floor(j / data.mapWidth) * data.tileHeight

        layer.add(s)
      }
    }
  }

  /**
   * Converts a pixel location to a map tile location.
   *
   * @param pos Pixel location to convert.
   */
  pixelToMapPos(pos: Vec) {
    return new Vec(
      Math.floor(pos.x / this.tileWidth),
      Math.floor(pos.y / this.tileHeight)
    )
  }

  /**
   * Converts a map tile location to a pixel location.
   *
   * @returns Vec Top-left corner pixel coordinate.
   *
   * @param mapPos Map location to convert.
   */
  mapToPixelPos(mapPos: Vec) {
    return new Vec(
      mapPos.x * this.tileWidth,
      mapPos.y * this.tileHeight
    )
  }

  /**
   * Gets the tile at the specified location.
   *
   * @param mapPos Tile location to lookup tile.
   */
  tileAtMapPos(mapPos: Vec) {
    return &lt;TileSprite&gt;(this.children as any)
      [this.levelIndex].children[mapPos.y * this.mapWidth + mapPos.x]
  }

  /**
   * Gets the tile at the specified location.
   *
   * @param pos Pixel location to lookup tile.
   */
  tileAtPixelPos(pos: Vec) {
    return this.tileAtMapPos(this.pixelToMapPos(pos))
  }

  /**
   * Gets the tile at the specified location and sets the &#x60;frame&#x60; property.
   *
   * @param mapPos Tile location to lookup tile.
   * @param frame The frame to set on the tile.
   */
  setTileFrameAtMapPos(mapPos: Vec, frame: Point) {
    const tile &#x3D; this.tileAtMapPos(mapPos)

    tile.frame &#x3D; frame

    return tile
  }

  /**
   * Gets the tile at the specified location and sets the &#x60;frame&#x60; property.
   *
   * @param pos Pixel location to lookup tile.
   * @param frame The frame to set on the tile.
   */
  setTileFrameAtPixelPos(pos: Vec, frame: Point) {
    return this.setTileFrameAtMapPos(this.pixelToMapPos(pos), frame)
  }

  /**
   * Gets the tiles at all four corners of the specified HitBox.
   *
   * @param box HitBox to test for corner tiles.
   * @param xo X axis offset to check against.
   * @param yo Y axis offset to check against.
   */
  tilesAtCorners(box: HitBox, xo &#x3D; 0, yo &#x3D; 0): TileSprite[] {
    const tiles &#x3D; []
    const corners &#x3D; [
      [box.x, box.y],
      [box.x + box.width, box.y],
      [box.x, box.y + box.height],
      [box.x + box.width, box.y + box.height]
    ]

    for (let i &#x3D; 0; i &lt; corners.length; i++) {
      tiles.push(this.tileAtPixelPos({
        x: corners[i][0] + xo,
        y: corners[i][1] + yo
      } as any))
    }

    return tiles
  }
}
</code></pre>
    </div>
</div>


                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'HasFrame.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
